<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" 
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout/default}">
        
        <section layout:fragment="contents" class="contents d-flex justify-content-center">
            <div class="input-box my-5 p-5 rounded-lg h-100">
                <h2 class="text-center">로그인</h2>
                <input type="text" placeholder="아이디" id="id" class="form-control mt-4">
                <input type="password" id="password" placeholder="비밀번호" class="form-control mt-2">
                <button type="button" id="login-btn" class="btn btn-secondary btn-block mt-3">가입</button>
            </div>
        </section>
        
        <script layout:fragment="script">
        	$(document).ready(function()
        	{
        		$("#login-btn").on("click", function()
        		{
        			let id = $("#id").val()
        			let password = $("#password").val();
        			
        			if(id == "")
        			{
        				alert("ID를 입력해주세요.");
        				return;
        			}
        			else if(password == "")
        			{
        				alert("Password를 입력해주세요.");
        				return;
        			}
        			
        			$.ajax
        			({
        				type:"post",
        				url:"/user/login",
        				data:{"loginId":id, "password":password},
        				success:function(data)
        				{
        					if(data.result == "success")
        					{
        						location.href="/post/list-view";
        					}
        					else
        					{
        						alert("로그인 실패");
        					}
        				}
        				,error:function()
        				{
        					alert("로그인 에러");
        				}
        			});
        		});
        	});
        	
        </script>
</html>